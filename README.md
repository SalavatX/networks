# Социальная сеть

## Миграция с Firebase на MySQL

В данном проекте была выполнена миграция базы данных с Firebase на MySQL. Интерфейс пользователя остался прежним.

### Предварительные требования

- Node.js 18+ 
- MySQL 8+
- phpMyAdmin (для удобства работы с MySQL)

### Настройка базы данных

1. Установите и запустите MySQL сервер
2. Настройте phpMyAdmin для доступа к MySQL
3. Создайте базу данных и таблицы, выполнив SQL-скрипт:

```bash
# Если у вас настроен доступ к MySQL через командную строку
npm run init-db

# Или импортируйте скрипт server/database.sql через phpMyAdmin
```

### Настройка переменных окружения

Создайте файл `.env` в корне проекта и в директории `server/` со следующими параметрами:

```
# Настройки базы данных
DB_HOST=localhost
DB_USER=root
DB_PASSWORD=ваш_пароль
DB_NAME=social_network

# Настройки сервера
PORT=3001
JWT_SECRET=ваш_секретный_ключ

# URL API (только для корневого .env)
VITE_API_URL=http://localhost:3001/api
```

### Установка зависимостей

```bash
npm install
```

### Запуск приложения

```bash
# Запуск в режиме разработки (клиент + сервер)
npm run dev:full

# Запуск только клиентской части
npm run dev

# Запуск только серверной части
npm run server
```

### Миграция данных с Firebase

Для миграции существующих данных с Firebase на MySQL:

1. Экспортируйте данные из Firebase (Firestore)
2. Преобразуйте их в формат SQL с помощью скрипта миграции
3. Импортируйте данные в MySQL

Пример скрипта миграции можно создать с использованием Node.js и пакетов firebase-admin и mysql2.

### Изменения в коде

- Firebase заменен на REST API с MySQL на бэкенде
- Добавлен новый сервис для работы с API (`mysqlService.ts`)
- Обновлен контекст аутентификации для работы с JWT вместо Firebase Auth
- Сохранена структура данных и интерфейс пользователя

### Примечания по безопасности

- Пароли хранятся в хешированном виде с использованием bcrypt
- Используется JWT для аутентификации
- Добавлена middleware для проверки авторизации на стороне сервера

### Возможные проблемы

- **Проблема**: Ошибка подключения к базе данных
  **Решение**: Проверьте настройки подключения в файле `.env` и убедитесь, что MySQL сервер запущен

- **Проблема**: Ошибки CORS
  **Решение**: Убедитесь, что настройки CORS на сервере разрешают запросы с вашего домена

- **Проблема**: Ошибки авторизации
  **Решение**: Проверьте правильность работы JWT и middleware authenticate 